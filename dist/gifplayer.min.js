(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(require("prop-types"),require("react"));else if(typeof define==="function"&&define.amd)define(["prop-types","react"],factory);else if(typeof exports==="object")exports["GifPlayer"]=factory(require("prop-types"),require("react"));else root["GifPlayer"]=factory(root["PropTypes"],root["React"])})(window,function(__WEBPACK_EXTERNAL_MODULE__0__,__WEBPACK_EXTERNAL_MODULE__1__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="/dist/";return __webpack_require__(__webpack_require__.s=6)}([function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__0__},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(module,exports,__webpack_require__){"use strict";function componentWillMount(){var state=this.constructor.getDerivedStateFromProps(this.props,this.state);if(state!==null&&state!==undefined){this.setState(state)}}function componentWillReceiveProps(nextProps){var state=this.constructor.getDerivedStateFromProps(nextProps,this.state);if(state!==null&&state!==undefined){this.setState(state)}}function componentWillUpdate(nextProps,nextState){try{var prevProps=this.props;var prevState=this.state;this.props=nextProps;this.state=nextState;this.__reactInternalSnapshotFlag=true;this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(prevProps,prevState)}finally{this.props=prevProps;this.state=prevState}}componentWillMount.__suppressDeprecationWarning=true;componentWillReceiveProps.__suppressDeprecationWarning=true;componentWillUpdate.__suppressDeprecationWarning=true;function polyfill(Component){if(!Component.prototype||!Component.prototype.isReactComponent){throw new Error("Can only polyfill class components")}if(typeof Component.getDerivedStateFromProps==="function"){if(typeof Component.prototype.componentWillMount==="function"){throw new Error("Cannot polyfill getDerivedStateFromProps() for components that define componentWillMount()")}else if(typeof Component.prototype.componentWillReceiveProps==="function"){throw new Error("Cannot polyfill getDerivedStateFromProps() for components that define componentWillReceiveProps()")}Component.prototype.componentWillMount=componentWillMount;Component.prototype.componentWillReceiveProps=componentWillReceiveProps}if(typeof Component.prototype.getSnapshotBeforeUpdate==="function"){if(typeof Component.prototype.componentWillUpdate==="function"){throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that define componentWillUpdate()")}if(typeof Component.prototype.componentDidUpdate!=="function"){throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype")}Component.prototype.componentWillUpdate=componentWillUpdate;var componentDidUpdate=Component.prototype.componentDidUpdate;Component.prototype.componentDidUpdate=function componentDidUpdatePolyfill(prevProps,prevState,maybeSnapshot){var snapshot=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:maybeSnapshot;componentDidUpdate.call(this,prevProps,prevState,snapshot)}}return Component}module.exports=polyfill},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){var classes=[];for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(!arg)continue;var argType=typeof arg;if(argType==="string"||argType==="number"){classes.push(arg)}else if(Array.isArray(arg)&&arg.length){var inner=classNames.apply(null,arg);if(inner){classes.push(inner)}}else if(argType==="object"){for(var key in arg){if(hasOwn.call(arg,key)&&arg[key]){classes.push(key)}}}}return classes.join(" ")}if(true&&module.exports){classNames.default=classNames;module.exports=classNames}else if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})()},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(root,factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(this,function(){var bitsToNum=function(ba){return ba.reduce(function(s,n){return s*2+n},0)};var byteToBitArr=function(bite){var a=[];for(var i=7;i>=0;i--){a.push(!!(bite&1<<i))}return a};var Stream=function(data){this.data=data;this.len=this.data.length;this.pos=0;this.readByte=function(){if(this.pos>=this.data.length){throw new Error("Attempted to read past end of stream.")}if(data instanceof Uint8Array)return data[this.pos++];else return data.charCodeAt(this.pos++)&255};this.readBytes=function(n){var bytes=[];for(var i=0;i<n;i++){bytes.push(this.readByte())}return bytes};this.read=function(n){var s="";for(var i=0;i<n;i++){s+=String.fromCharCode(this.readByte())}return s};this.readUnsigned=function(){var a=this.readBytes(2);return(a[1]<<8)+a[0]}};var lzwDecode=function(minCodeSize,data){var pos=0;var readCode=function(size){var code=0;for(var i=0;i<size;i++){if(data.charCodeAt(pos>>3)&1<<(pos&7)){code|=1<<i}pos++}return code};var output=[];var clearCode=1<<minCodeSize;var eoiCode=clearCode+1;var codeSize=minCodeSize+1;var dict=[];var clear=function(){dict=[];codeSize=minCodeSize+1;for(var i=0;i<clearCode;i++){dict[i]=[i]}dict[clearCode]=[];dict[eoiCode]=null};var code;var last;while(true){last=code;code=readCode(codeSize);if(code===clearCode){clear();continue}if(code===eoiCode)break;if(code<dict.length){if(last!==clearCode){dict.push(dict[last].concat(dict[code][0]))}}else{if(code!==dict.length)throw new Error("Invalid LZW code.");dict.push(dict[last].concat(dict[last][0]))}output.push.apply(output,dict[code]);if(dict.length===1<<codeSize&&codeSize<12){codeSize++}}return output};var parseGIF=function(st,handler){handler||(handler={});var parseCT=function(entries){var ct=[];for(var i=0;i<entries;i++){ct.push(st.readBytes(3))}return ct};var readSubBlocks=function(){var size,data;data="";do{size=st.readByte();data+=st.read(size)}while(size!==0);return data};var parseHeader=function(){var hdr={};hdr.sig=st.read(3);hdr.ver=st.read(3);if(hdr.sig!=="GIF")throw new Error("Not a GIF file.");hdr.width=st.readUnsigned();hdr.height=st.readUnsigned();var bits=byteToBitArr(st.readByte());hdr.gctFlag=bits.shift();hdr.colorRes=bitsToNum(bits.splice(0,3));hdr.sorted=bits.shift();hdr.gctSize=bitsToNum(bits.splice(0,3));hdr.bgColor=st.readByte();hdr.pixelAspectRatio=st.readByte();if(hdr.gctFlag){hdr.gct=parseCT(1<<hdr.gctSize+1)}handler.hdr&&handler.hdr(hdr)};var parseExt=function(block){var parseGCExt=function(block){var blockSize=st.readByte();var bits=byteToBitArr(st.readByte());block.reserved=bits.splice(0,3);block.disposalMethod=bitsToNum(bits.splice(0,3));block.userInput=bits.shift();block.transparencyGiven=bits.shift();block.delayTime=st.readUnsigned();block.transparencyIndex=st.readByte();block.terminator=st.readByte();handler.gce&&handler.gce(block)};var parseComExt=function(block){block.comment=readSubBlocks();handler.com&&handler.com(block)};var parsePTExt=function(block){var blockSize=st.readByte();block.ptHeader=st.readBytes(12);block.ptData=readSubBlocks();handler.pte&&handler.pte(block)};var parseAppExt=function(block){var parseNetscapeExt=function(block){var blockSize=st.readByte();block.unknown=st.readByte();block.iterations=st.readUnsigned();block.terminator=st.readByte();handler.app&&handler.app.NETSCAPE&&handler.app.NETSCAPE(block)};var parseUnknownAppExt=function(block){block.appData=readSubBlocks();handler.app&&handler.app[block.identifier]&&handler.app[block.identifier](block)};var blockSize=st.readByte();block.identifier=st.read(8);block.authCode=st.read(3);switch(block.identifier){case"NETSCAPE":parseNetscapeExt(block);break;default:parseUnknownAppExt(block);break}};var parseUnknownExt=function(block){block.data=readSubBlocks();handler.unknown&&handler.unknown(block)};block.label=st.readByte();switch(block.label){case 249:block.extType="gce";parseGCExt(block);break;case 254:block.extType="com";parseComExt(block);break;case 1:block.extType="pte";parsePTExt(block);break;case 255:block.extType="app";parseAppExt(block);break;default:block.extType="unknown";parseUnknownExt(block);break}};var parseImg=function(img){var deinterlace=function(pixels,width){var newPixels=new Array(pixels.length);var rows=pixels.length/width;var cpRow=function(toRow,fromRow){var fromPixels=pixels.slice(fromRow*width,(fromRow+1)*width);newPixels.splice.apply(newPixels,[toRow*width,width].concat(fromPixels))};var offsets=[0,4,2,1];var steps=[8,8,4,2];var fromRow=0;for(var pass=0;pass<4;pass++){for(var toRow=offsets[pass];toRow<rows;toRow+=steps[pass]){cpRow(toRow,fromRow);fromRow++}}return newPixels};img.leftPos=st.readUnsigned();img.topPos=st.readUnsigned();img.width=st.readUnsigned();img.height=st.readUnsigned();var bits=byteToBitArr(st.readByte());img.lctFlag=bits.shift();img.interlaced=bits.shift();img.sorted=bits.shift();img.reserved=bits.splice(0,2);img.lctSize=bitsToNum(bits.splice(0,3));if(img.lctFlag){img.lct=parseCT(1<<img.lctSize+1)}img.lzwMinCodeSize=st.readByte();var lzwData=readSubBlocks();img.pixels=lzwDecode(img.lzwMinCodeSize,lzwData);if(img.interlaced){img.pixels=deinterlace(img.pixels,img.width)}handler.img&&handler.img(img)};var parseBlock=function(){var block={};block.sentinel=st.readByte();switch(String.fromCharCode(block.sentinel)){case"!":block.type="ext";parseExt(block);break;case",":block.type="img";parseImg(block);break;case";":block.type="eof";handler.eof&&handler.eof(block);break;default:throw new Error("Unknown block: 0x"+block.sentinel.toString(16))}if(block.type!=="eof")setTimeout(parseBlock,0)};var parse=function(){parseHeader();setTimeout(parseBlock,0)};parse()};var SuperGif=function(opts){var options={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var i in opts){options[i]=opts[i]}if(options.vp_w&&options.vp_h)options.is_vp=true;var stream;var hdr;var loadError=null;var loading=false;var transparency=null;var delay=null;var disposalMethod=null;var disposalRestoreFromIdx=null;var lastDisposalMethod=null;var frame=null;var lastImg=null;var playing=true;var forward=true;var ctx_scaled=false;var frames=[];var frameOffsets=[];var gif=options.gif;if(typeof options.auto_play=="undefined")options.auto_play=!gif.getAttribute("rel:auto_play")||gif.getAttribute("rel:auto_play")=="1";var onEndListener=options.hasOwnProperty("on_end")?options.on_end:null;var loopDelay=options.hasOwnProperty("loop_delay")?options.loop_delay:0;var overrideLoopMode=options.hasOwnProperty("loop_mode")?options.loop_mode:"auto";var drawWhileLoading=options.hasOwnProperty("draw_while_loading")?options.draw_while_loading:true;var showProgressBar=drawWhileLoading?options.hasOwnProperty("show_progress_bar")?options.show_progress_bar:true:false;var progressBarHeight=options.hasOwnProperty("progressbar_height")?options.progressbar_height:25;var progressBarBackgroundColor=options.hasOwnProperty("progressbar_background_color")?options.progressbar_background_color:"rgba(255,255,255,0.4)";var progressBarForegroundColor=options.hasOwnProperty("progressbar_foreground_color")?options.progressbar_foreground_color:"rgba(255,0,22,.8)";var clear=function(){transparency=null;delay=null;lastDisposalMethod=disposalMethod;disposalMethod=null;frame=null};var doParse=function(){try{parseGIF(stream,handler)}catch(err){doLoadError("parse")}};var doText=function(text){toolbar.innerHTML=text;toolbar.style.visibility="visible"};var setSizes=function(w,h){canvas.width=w*get_canvas_scale();canvas.height=h*get_canvas_scale();toolbar.style.minWidth=w*get_canvas_scale()+"px";tmpCanvas.width=w;tmpCanvas.height=h;tmpCanvas.style.width=w+"px";tmpCanvas.style.height=h+"px";tmpCanvas.getContext("2d").setTransform(1,0,0,1,0,0)};var setFrameOffset=function(frame,offset){if(!frameOffsets[frame]){frameOffsets[frame]=offset;return}if(typeof offset.x!=="undefined"){frameOffsets[frame].x=offset.x}if(typeof offset.y!=="undefined"){frameOffsets[frame].y=offset.y}};var doShowProgress=function(pos,length,draw){if(draw&&showProgressBar){var height=progressBarHeight;var left,mid,top,width;if(options.is_vp){if(!ctx_scaled){top=options.vp_t+options.vp_h-height;height=height;left=options.vp_l;mid=left+pos/length*options.vp_w;width=canvas.width}else{top=(options.vp_t+options.vp_h-height)/get_canvas_scale();height=height/get_canvas_scale();left=options.vp_l/get_canvas_scale();mid=left+pos/length*(options.vp_w/get_canvas_scale());width=canvas.width/get_canvas_scale()}if(false){var w,h,l,t}}else{top=(canvas.height-height)/(ctx_scaled?get_canvas_scale():1);mid=pos/length*canvas.width/(ctx_scaled?get_canvas_scale():1);width=canvas.width/(ctx_scaled?get_canvas_scale():1);height/=ctx_scaled?get_canvas_scale():1}ctx.fillStyle=progressBarBackgroundColor;ctx.fillRect(mid,top,width-mid,height);ctx.fillStyle=progressBarForegroundColor;ctx.fillRect(0,top,mid,height)}};var doLoadError=function(originOfError){var drawError=function(){ctx.fillStyle="black";ctx.fillRect(0,0,options.c_w?options.c_w:hdr.width,options.c_h?options.c_h:hdr.height);ctx.strokeStyle="red";ctx.lineWidth=3;ctx.moveTo(0,0);ctx.lineTo(options.c_w?options.c_w:hdr.width,options.c_h?options.c_h:hdr.height);ctx.moveTo(0,options.c_h?options.c_h:hdr.height);ctx.lineTo(options.c_w?options.c_w:hdr.width,0);ctx.stroke()};loadError=originOfError;hdr={width:gif.width,height:gif.height};frames=[];drawError()};var doHdr=function(_hdr){hdr=_hdr;setSizes(hdr.width,hdr.height)};var doGCE=function(gce){pushFrame();clear();transparency=gce.transparencyGiven?gce.transparencyIndex:null;delay=gce.delayTime;disposalMethod=gce.disposalMethod};var pushFrame=function(){if(!frame)return;frames.push({data:frame.getImageData(0,0,hdr.width,hdr.height),delay:delay});frameOffsets.push({x:0,y:0})};var doImg=function(img){if(!frame)frame=tmpCanvas.getContext("2d");var currIdx=frames.length;var ct=img.lctFlag?img.lct:hdr.gct;if(currIdx>0){if(lastDisposalMethod===3){if(disposalRestoreFromIdx!==null){frame.putImageData(frames[disposalRestoreFromIdx].data,0,0)}else{frame.clearRect(lastImg.leftPos,lastImg.topPos,lastImg.width,lastImg.height)}}else{disposalRestoreFromIdx=currIdx-1}if(lastDisposalMethod===2){frame.clearRect(lastImg.leftPos,lastImg.topPos,lastImg.width,lastImg.height)}}var imgData=frame.getImageData(img.leftPos,img.topPos,img.width,img.height);img.pixels.forEach(function(pixel,i){if(pixel!==transparency){imgData.data[i*4+0]=ct[pixel][0];imgData.data[i*4+1]=ct[pixel][1];imgData.data[i*4+2]=ct[pixel][2];imgData.data[i*4+3]=255}});frame.putImageData(imgData,img.leftPos,img.topPos);if(!ctx_scaled){ctx.scale(get_canvas_scale(),get_canvas_scale());ctx_scaled=true}if(drawWhileLoading){ctx.drawImage(tmpCanvas,0,0);drawWhileLoading=options.auto_play}lastImg=img};var player=function(){var i=-1;var iterationCount=0;var showingInfo=false;var pinned=false;var getNextFrameNo=function(){var delta=forward?1:-1;return(i+delta+frames.length)%frames.length};var stepFrame=function(amount){i=i+amount;putFrame()};var step=function(){var stepping=false;var completeLoop=function(){if(onEndListener!==null)onEndListener(gif);iterationCount++;if(overrideLoopMode!==false||iterationCount<0){doStep()}else{stepping=false;playing=false}};var doStep=function(){stepping=playing;if(!stepping)return;stepFrame(1);var delay=frames[i].delay*10;if(!delay)delay=100;var nextFrameNo=getNextFrameNo();if(nextFrameNo===0){delay+=loopDelay;setTimeout(completeLoop,delay)}else{setTimeout(doStep,delay)}};return function(){if(!stepping)setTimeout(doStep,0)}}();var putFrame=function(){var offset;i=parseInt(i,10);if(i>frames.length-1){i=0}if(i<0){i=0}offset=frameOffsets[i];tmpCanvas.getContext("2d").putImageData(frames[i].data,offset.x,offset.y);ctx.globalCompositeOperation="copy";ctx.drawImage(tmpCanvas,0,0)};var play=function(){playing=true;step()};var pause=function(){playing=false};return{init:function(){if(loadError)return;if(!(options.c_w&&options.c_h)){ctx.scale(get_canvas_scale(),get_canvas_scale())}if(options.auto_play){step()}else{i=0;putFrame()}},step:step,play:play,pause:pause,playing:playing,move_relative:stepFrame,current_frame:function(){return i},length:function(){return frames.length},move_to:function(frame_idx){i=frame_idx;putFrame()}}}();var doDecodeProgress=function(draw){doShowProgress(stream.pos,stream.data.length,draw)};var doNothing=function(){};var withProgress=function(fn,draw){return function(block){fn(block);doDecodeProgress(draw)}};var handler={hdr:withProgress(doHdr),gce:withProgress(doGCE),com:withProgress(doNothing),app:{NETSCAPE:withProgress(doNothing)},img:withProgress(doImg,true),eof:function(block){pushFrame();doDecodeProgress(false);if(!(options.c_w&&options.c_h)){canvas.width=hdr.width*get_canvas_scale();canvas.height=hdr.height*get_canvas_scale()}player.init();loading=false;if(load_callback){load_callback(gif)}}};var init=function(){var parent=gif.parentNode;var div=document.createElement("div");canvas=document.createElement("canvas");ctx=canvas.getContext("2d");toolbar=document.createElement("div");tmpCanvas=document.createElement("canvas");div.width=canvas.width=gif.width;div.height=canvas.height=gif.height;toolbar.style.minWidth=gif.width+"px";div.className="jsgif";toolbar.className="jsgif_toolbar";div.appendChild(canvas);div.appendChild(toolbar);parent.insertBefore(div,gif);parent.removeChild(gif);if(options.c_w&&options.c_h)setSizes(options.c_w,options.c_h);initialized=true};var get_canvas_scale=function(){var scale;if(options.max_width&&hdr&&hdr.width>options.max_width){scale=options.max_width/hdr.width}else{scale=1}return scale};var canvas,ctx,toolbar,tmpCanvas;var initialized=false;var load_callback=false;var load_setup=function(callback){if(loading)return false;if(callback)load_callback=callback;else load_callback=false;loading=true;frames=[];clear();disposalRestoreFromIdx=null;lastDisposalMethod=null;frame=null;lastImg=null;return true};var calculateDuration=function(){return frames.reduce(function(duration,frame){return duration+frame.delay},0)};return{play:player.play,pause:player.pause,move_relative:player.move_relative,move_to:player.move_to,get_playing:function(){return playing},get_canvas:function(){return canvas},get_canvas_scale:function(){return get_canvas_scale()},get_loading:function(){return loading},get_auto_play:function(){return options.auto_play},get_length:function(){return player.length()},get_frames:function(){return frames},get_duration:function(){return calculateDuration()},get_duration_ms:function(){return calculateDuration()*10},get_current_frame:function(){return player.current_frame()},load_url:function(src,callback){if(!load_setup(callback))return;var h=new XMLHttpRequest;h.open("GET",src,true);if("overrideMimeType"in h){h.overrideMimeType("text/plain; charset=x-user-defined")}else if("responseType"in h){h.responseType="arraybuffer"}else{h.setRequestHeader("Accept-Charset","x-user-defined")}h.onloadstart=function(){if(!initialized)init()};h.onload=function(e){if(this.status!=200){doLoadError("xhr - response")}if(!("response"in this)){this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join("")}var data=this.response;if(data.toString().indexOf("ArrayBuffer")>0){data=new Uint8Array(data)}stream=new Stream(data);setTimeout(doParse,0)};h.onprogress=function(e){if(e.lengthComputable)doShowProgress(e.loaded,e.total,true)};h.onerror=function(){doLoadError("xhr")};h.send()},load:function(callback){this.load_url(gif.getAttribute("rel:animated_src")||gif.src,callback)},load_raw:function(arr,callback){if(!load_setup(callback))return;if(!initialized)init();stream=new Stream(arr);setTimeout(doParse,0)},set_frame_offset:setFrameOffset}};return SuperGif})},function(module,exports,__webpack_require__){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var external_root_React_commonjs_react_commonjs2_react_amd_react_=__webpack_require__(1);var external_root_React_commonjs_react_commonjs2_react_amd_react_default=__webpack_require__.n(external_root_React_commonjs_react_commonjs2_react_amd_react_);var external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_=__webpack_require__(0);var external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default=__webpack_require__.n(external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_);var react_lifecycles_compat_cjs=__webpack_require__(2);var react_lifecycles_compat_cjs_default=__webpack_require__.n(react_lifecycles_compat_cjs);var classnames=__webpack_require__(3);var classnames_default=__webpack_require__.n(classnames);var src_GifPlayer=__webpack_require__(5);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var GifPlayer_GifPlayer=function GifPlayer(_ref){var gif=_ref.gif,still=_ref.still,playing=_ref.playing,toggle=_ref.toggle,onLoad=_ref.onLoad,rest=_objectWithoutPropertiesLoose(_ref,["gif","still","playing","toggle","onLoad"]);return external_root_React_commonjs_react_commonjs2_react_amd_react_default.a.createElement("div",{className:classnames_default()("gif_player",{playing:playing}),onClick:toggle},external_root_React_commonjs_react_commonjs2_react_amd_react_default.a.createElement("div",{className:"play_button"}),external_root_React_commonjs_react_commonjs2_react_amd_react_default.a.createElement("img",_extends({hidden:playing,className:"still"},rest,{src:still})),external_root_React_commonjs_react_commonjs2_react_amd_react_default.a.createElement("img",_extends({onLoad:onLoad},rest,{src:gif})))};GifPlayer_GifPlayer.propTypes={gif:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default.a.string,still:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default.a.string,playing:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default.a.bool,toggle:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default.a.func};var src_GifPlayer_0=GifPlayer_GifPlayer;var libgif=__webpack_require__(4);var libgif_default=__webpack_require__.n(libgif);function src_extends(){src_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return src_extends.apply(this,arguments)}function src_objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass}var preload=function preload(src,callback){var img=new Image;if(typeof callback==="function"){img.onload=function(){return callback(img)};img.setAttribute("crossOrigin","anonymous")}img.src=src};var firstGifFrameUrl=function firstGifFrameUrl(img){var canvas=document.createElement("canvas");if(typeof canvas.getContext!=="function"){return null}canvas.width=img.width;canvas.height=img.height;var ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);return canvas.toDataURL()};var src_GifPlayerContainer=function(_React$Component){_inheritsLoose(GifPlayerContainer,_React$Component);GifPlayerContainer.getDerivedStateFromProps=function getDerivedStateFromProps(nextProps,prevState){var prevGif=prevState.providedGif;var nextGif=nextProps.gif;var prevStill=prevState.providedStill;var nextStill=nextProps.still;if(prevGif===nextGif&&prevStill===nextStill){return null}return{playing:nextGif&&nextProps.autoplay&&prevGif!==nextGif?true:prevState.playing,providedGif:nextGif,providedStill:nextStill,actualGif:nextGif,actualStill:nextStill||prevGif!==nextGif?nextStill:prevState.actualStill,isToggle:nextProps.isToggle,onPlayEnd:nextProps.onPlayEnd,loop:nextProps.loop||0}};function GifPlayerContainer(props){var _this;_this=_React$Component.call(this,props)||this;_this.state={playing:Boolean(props.autoplay),providedGif:props.gif,providedStill:props.still,actualGif:props.gif,actualStill:props.still,isToggle:!Boolean(props.isToggle),onPlayEnd:props.onPlayEnd,loop:props.loop||0};_this.updateId=-1;_this.loopCount=0;_this.onPlayEnd=_this.onPlayEnd.bind(_assertThisInitialized(_this));return _this}var _proto=GifPlayerContainer.prototype;_proto.componentDidMount=function componentDidMount(){var _this2=this;if(typeof this.props.pauseRef==="function"){this.props.pauseRef(function(){return _this2.setState({playing:false})})}this.updateImages()};_proto.componentDidUpdate=function componentDidUpdate(prevProps,prevState){this.updateImages(prevState);var onTogglePlay=this.props.onTogglePlay;if(prevState.playing!==this.state.playing&&typeof onTogglePlay==="function"){onTogglePlay(this.state.playing)}if(prevState.playing!==this.state.playing){if(this.state.playing){if(this.superGif){this.superGif.play()}}else{if(this.superGif){this.superGif.pause()}}}};_proto.componentWillUnmount=function componentWillUnmount(){if(this.superGif){this.superGif.pause();this.superGif=null}};_proto.updateImages=function updateImages(prevState){var _this3=this;if(prevState===void 0){prevState={}}var _this$state=this.state,providedGif=_this$state.providedGif,providedStill=_this$state.providedStill;if(providedGif&&!providedStill&&providedGif!==prevState.providedGif){var updateId=++this.updateId;preload(providedGif,function(img){if(_this3.updateId===updateId){var actualStill=firstGifFrameUrl(img);if(actualStill){_this3.setState({actualStill:actualStill})}}})}};_proto.toggle=function toggle(){this.setState({playing:!this.state.playing})};_proto.onPlayEnd=function onPlayEnd(data){this.loopCount++;if(this.props.onPlayEnd){this.props.onPlayEnd({type:"playEnd",ms:this.superGif.get_duration_ms(),duration:this.superGif.get_duration(),frame:this.superGif.get_current_frame()})}if(this.state.loop>0&&this.loopCount>=this.state.loop){this.toggle()}};_proto.onLoad=function onLoad(event){var img=event.target;if(this.superGif){if(this.state.playing){this.loopCount=0;this.superGif.play()}else{this.superGif.pause()}return}if(/.*\.gif/.test(img.src)){this.superGif=new libgif_default.a({auto_play:this.state.playing,gif:img,show_progress_bar:false,on_end:this.onPlayEnd});this.superGif.load()}};_proto.render=function render(){var _this4=this;var _this$props=this.props,autoplay=_this$props.autoplay,pauseRef=_this$props.pauseRef,onTogglePlay=_this$props.onTogglePlay,onPlayEnd=_this$props.onPlayEnd,loop=_this$props.loop,rest=src_objectWithoutPropertiesLoose(_this$props,["autoplay","pauseRef","onTogglePlay","onPlayEnd","loop"]);var _this$state2=this.state,actualGif=_this$state2.actualGif,actualStill=_this$state2.actualStill,playing=_this$state2.playing,isToggle=_this$state2.isToggle;return external_root_React_commonjs_react_commonjs2_react_amd_react_default.a.createElement(src_GifPlayer_0,src_extends({},rest,{gif:actualGif,still:actualStill,playing:playing,toggle:function toggle(){isToggle&&_this4.toggle()},onLoad:this.onLoad.bind(this)}))};return GifPlayerContainer}(external_root_React_commonjs_react_commonjs2_react_amd_react_default.a.Component);react_lifecycles_compat_cjs_default()(src_GifPlayerContainer);src_GifPlayerContainer.propTypes={gif:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default.a.string,still:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default.a.string,autoplay:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default.a.bool,pauseRef:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default.a.func,onTogglePlay:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default.a.func,isToggle:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default.a.bool,onPlayEnd:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default.a.func,loop:external_root_PropTypes_commonjs_prop_types_commonjs2_prop_types_amd_prop_types_default.a.number};var src=__webpack_exports__["default"]=src_GifPlayerContainer}])["default"]});